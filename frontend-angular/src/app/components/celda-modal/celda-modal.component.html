<div mat-dialog-content>
  <h2 mat-dialog-title>Nueva Celda</h2>
  
  <form [formGroup]="celdaForm" (ngSubmit)="onSubmit()">

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Parqueadero</mat-label>
      <mat-select formControlName="idParqueadero" placeholder="Seleccione un parqueadero">
        @for (parqueadero of data.parqueaderos; track parqueadero.id) {
          <mat-option [value]="parqueadero.id">
            {{ parqueadero.nombre }}
          </mat-option>
        }
      </mat-select>
      @if (celdaForm.get('idParqueadero')?.hasError('required') && celdaForm.get('idParqueadero')?.touched) {
        <mat-error>El parqueadero es requerido</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>ID Tipo Celda</mat-label>
      <input matInput type="number" formControlName="idTipoCelda" placeholder="Ingrese el ID del tipo de celda">
      @if (celdaForm.get('idTipoCelda')?.hasError('required') && celdaForm.get('idTipoCelda')?.touched) {
        <mat-error>El tipo de celda es requerido</mat-error>
      }
      @if (celdaForm.get('idTipoCelda')?.hasError('min') && celdaForm.get('idTipoCelda')?.touched) {
        <mat-error>El ID debe ser mayor a 0</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>ID Sensor</mat-label>
      <input matInput type="number" formControlName="idSensor" placeholder="Ingrese el ID del sensor">
      @if (celdaForm.get('idSensor')?.hasError('required') && celdaForm.get('idSensor')?.touched) {
        <mat-error>El sensor es requerido</mat-error>
      }
      @if (celdaForm.get('idSensor')?.hasError('min') && celdaForm.get('idSensor')?.touched) {
        <mat-error>El ID debe ser mayor a 0</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Estado</mat-label>
      <mat-select formControlName="estado" placeholder="Seleccione el estado">
        @for (estado of estadosCeldas; track estado.valor) {
          <mat-option [value]="estado.valor">
            {{ estado.nombre }}
          </mat-option>
        }
      </mat-select>
      @if (celdaForm.get('estado')?.hasError('required') && celdaForm.get('estado')?.touched) {
        <mat-error>El estado es requerido</mat-error>
      }
    </mat-form-field>

    <div mat-dialog-actions class="dialog-actions">
      <button mat-button type="button" (click)="onCancel()">Cancelar</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="celdaForm.invalid">
        Crear Celda
      </button>
    </div>

  </form>
</div>
<div mat-dialog-content>
  <h2 mat-dialog-title>{{ isEditing ? 'Editar Tarifa' : 'Crear Tarifa' }}</h2>
  
  <form [formGroup]="tarifaForm" (ngSubmit)="onSubmit()">

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>ID Parqueadero</mat-label>


      <mat-select formControlName="idParqueadero" [disabled]="isEditing">
        @for (parqueadero of data.parqueaderos; track parqueadero.id) {
          <mat-option [value]="parqueadero.id">
           {{ parqueadero.nombre }}
          </mat-option>
        }
      </mat-select>
      @if (tarifaForm.get('idParqueadero')?.invalid && tarifaForm.get('idParqueadero')?.touched) {
        <mat-error>
          @if (tarifaForm.get('idParqueadero')?.errors?.['required']) {
            El parqueadero es requerido
          } @else if (tarifaForm.get('idParqueadero')?.errors?.['min']) {
            Debe ser mayor a 0
          }
        </mat-error>
      }
      @if (isEditing) {
        <mat-hint>No se puede editar</mat-hint>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>ID Tipo Vehiculo</mat-label>
      <input 
        matInput 
        type="number" 
        formControlName="idTipoVehiculo"
        placeholder="1"
        min="1"
        step="1"
        [disabled]="isEditing">
      @if (tarifaForm.get('idTipoVehiculo')?.invalid && tarifaForm.get('idTipoVehiculo')?.touched) {
        <mat-error>
          @if (tarifaForm.get('idTipoVehiculo')?.errors?.['required']) {
            El tipo de vihiculo es requerido
          } @else if (tarifaForm.get('idTipoVehiculo')?.errors?.['min']) {
            Debe ser mayor a 0
          }
        </mat-error>
      }
      @if (isEditing) {
        <mat-hint>No se puede editar</mat-hint>
      } 
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label> fraccion por Hora</mat-label>
      <input 
        matInput 
        type="number" 
        formControlName="precioFraccionHora"
        placeholder="5000"
        min="0"
        step="0.01">
      <span matTextPrefix>$</span>
      @if (tarifaForm.get('precioFraccionHora')?.invalid && tarifaForm.get('precioFraccionHora')?.touched) {
        <mat-error>
          @if (tarifaForm.get('precioFraccionHora')?.errors?.['required']) {
            El precio fraccion hora es requerido
          } @else if (tarifaForm.get('precioFraccionHora')?.errors?.['min']) {
            Debe ser mayor o igual a 0
          }
        </mat-error>
      }
    </mat-form-field>


    <mat-form-field appearance="outline" class="full-width">
      <mat-label> Hora Adicional (Opcional)</mat-label>
      <input 
        matInput 
        type="number" 
        formControlName="precioHoraAdicional"
        placeholder="3000"
        min="0"
        step="0.01">
      <span matTextPrefix>$</span>
      @if (tarifaForm.get('precioHoraAdicional')?.invalid && tarifaForm.get('precioHoraAdicional')?.touched) {
        <mat-error>
          @if (tarifaForm.get('precioHoraAdicional')?.errors?.['min']) {
            Debe ser mayor o igual a 0
          }
        </mat-error>
      }
    </mat-form-field>


    <div mat-dialog-actions class="dialog-actions">
      <button mat-button type="button" (click)="onCancel()">
        Cancelar
      </button>
      <button 
        mat-raised-button 
        color="primary" 
        type="submit"
        [disabled]="tarifaForm.invalid">
        {{ isEditing ? 'Actualizar' : 'Crear' }}
      </button>
    </div>

  </form>
</div>
@if (loading) {
  <div class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Cargando ocupación...</p>
  </div>
} @else {
  <div class="table-container">
    <table mat-table [dataSource]="ocupacionData" class="ocupacion-table">

      <ng-container matColumnDef="nombreParqueadero">
        <th mat-header-cell *matHeaderCellDef>Parqueadero</th>
        <td mat-cell *matCellDef="let element">{{ element.nombreParqueadero }}</td>
      </ng-container>

      <ng-container matColumnDef="totalCeldas">
        <th mat-header-cell *matHeaderCellDef>Capacidad</th>
        <td mat-cell *matCellDef="let element">{{ element.totalCeldas }}</td>
      </ng-container>

      <ng-container matColumnDef="celdasOcupadas">
        <th mat-header-cell *matHeaderCellDef>Ocupadas</th>
        <td mat-cell *matCellDef="let element">{{ element.celdasOcupadas }}</td>
      </ng-container>

      <ng-container matColumnDef="celdasLibres">
        <th mat-header-cell *matHeaderCellDef>Disponibles</th>
        <td mat-cell *matCellDef="let element">{{ element.celdasLibres }}</td>
      </ng-container>

      <ng-container matColumnDef="porcentajeOcupacion">
        <th mat-header-cell *matHeaderCellDef>Ocupación</th>
        <td mat-cell *matCellDef="let element">
          {{ calcularPorcentajeOcupacion(element) }}%
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    @if (ocupacionData.length === 0) {
      <div class="sin-datos">
        <mat-icon>info</mat-icon>
        <p>No hay datos de ocupación disponibles</p>
      </div>
    }
  </div>
}
<div class="dashboard-container">

  <div class="dashboard-header">
    <div class="empresa-info">
      <span class="empresa-label">Empresa: </span>
      <span class="empresa-nombre">{{ empresaUsuario?.nombre || 'Cargando' }}</span>
    </div>
  </div>


  <div class="quick-actions">
    <h3>Acciones Rapidas</h3>
    <div class="actions-grid">
      <button 
        class="action-btn"
        (click)="cambioReservas()"
      >

        <i class="fas fa-plus-circle"></i>
        <span>{{ mostrarReservasActivas ? 'Mostrar Historial de Reservas' : 'Mostrar Reservas Activas' }}</span>
      </button>
      
      <button 
        class="action-btn"
        (click)="registrarVehiculo()"
      >
        <i class="fas fa-car"></i>
        <span>Registrar vehiculo</span>
      </button>
      
      <button class="action-btn"
        (click)="verCeldas()">
        <i class="fas fa-th-large"></i>
        <span>Ver Celdas</span>
      </button>

    </div>
  </div>

  
 @if (loading) {
    <div class="loading-contentainer">
      <mat-spinner></mat-spinner>
      <p>Cargando datos del dashboard...</p>
    </div>
  } @else 
  {


    <div class="estadisticas-grid">

        <mat-card class="estadistica-card">
          <mat-card-header>
            <mat-icon class="estadistica-icono parqueaderos">business</mat-icon>
          </mat-card-header>



          <mat-card-content>
            <div class="estadistica-valor">{{ totalParqueaderos }}</div>
            <div class="estadistica-label">Parqueaderos Activos</div>
          </mat-card-content>
        </mat-card>

      <mat-card class="estadistica-card">
        <mat-card-header>
          <mat-icon class="estadistica-icono ocupadas">directions_car</mat-icon>
        </mat-card-header>

        <mat-card-content>

            <div class="estadistica-valor">{{ totalCeldasOcupadas }}</div>
            <div class="estadistica-label">Celdas Ocupadas</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="estadistica-card">
        <mat-card-header>
          <mat-icon class="estadistica-icono disponibles">local_parking</mat-icon>
        </mat-card-header>
        <mat-card-content>
          <div class="estadistica-valor">{{ totalCeldasDisponibles }}</div>
          <div class="estadistica-label">Celdas Disponibles</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="estadistica-card">
        <mat-card-header>
          <mat-icon class="estadistica-icono reservas">schedule</mat-icon>
        </mat-card-header>
        <mat-card-content>
          <div class="estadistica-valor">{{ totalReservasActivas }}</div>
          <div class="estadistica-label">Reservas Activas</div>
        </mat-card-content>
      </mat-card>

    </div>



    @if (!mostrarReservasActivas) {

      <div class="historial-reservas">
        <h3>Historial de reservas</h3>
        <app-historial-reservas 
          [historialReserva]="historial"
          [loading]="loading">

        </app-historial-reservas>
      </div>
    }


    @if (mostrarReservasActivas) {

      <div class="reservas-activas">
        <h3>Reservas Activas</h3>
        <app-reservas-activas 
          [reservasActivas]="reservasActivas"
          [loading]="loading">

        </app-reservas-activas>

      </div>

      
    }

  }
</div>